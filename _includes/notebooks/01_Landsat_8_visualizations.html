<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[1]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">geemap</span>
<span class="kn">import</span> <span class="nn">ee</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="kn">from</span> <span class="nn">egis.utils</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">vis_params_dict</span><span class="p">,</span> <span class="n">default_vis_params</span><span class="p">,</span> <span class="n">get_known_roi</span><span class="p">,</span> <span class="n">extract_single_img</span><span class="p">,</span> 
    <span class="n">extract_img_collection_metadata</span><span class="p">,</span> <span class="n">extract_img_collection_properties</span><span class="p">,</span>
    <span class="n">coords_to_polygon</span><span class="p">,</span> <span class="n">collection_len</span>
<span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[2]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ee</span><span class="o">.</span><span class="n">Initialize</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Description: understanding Landsat satellite data, frequency of images and ways to visualize without clouds.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Landsat-coverage">Landsat coverage<a class="anchor-link" href="#Landsat-coverage">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The satellite is circulating around the globe and taking remote sensing images. Thereby it will take consecutive snapshots from the earth as it progresses. Individual areas will be revisited regularly roughly every 2 weeks.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[3]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">roi_coords</span> <span class="o">=</span> <span class="n">get_known_roi</span><span class="p">(</span><span class="s1">&#39;grand_canyon&#39;</span><span class="p">)</span>
<span class="n">roi_region_large</span> <span class="o">=</span> <span class="n">coords_to_polygon</span><span class="p">(</span><span class="n">get_known_roi</span><span class="p">(</span><span class="s1">&#39;us_west_large&#39;</span><span class="p">))</span>
<span class="n">roi_region_medium</span> <span class="o">=</span> <span class="n">coords_to_polygon</span><span class="p">(</span><span class="n">get_known_roi</span><span class="p">(</span><span class="s1">&#39;grand_canyon_rectangle&#39;</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[4]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">vis_params_l8</span> <span class="o">=</span> <span class="n">default_vis_params</span><span class="p">(</span><span class="s1">&#39;landsat&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[5]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dataset</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s1">&#39;LANDSAT/LC08/C01/T1_SR&#39;</span><span class="p">)</span> \
                  <span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="s1">&#39;2016-10-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2016-12-31&#39;</span><span class="p">)</span> \
                  <span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">roi_region_large</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>The orbit of the satellite is reflected in the image tiles: vertical image neighbours are aligned more than horizontal neighbours, because there is much less time lag between vertically consecutive images.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[6]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Map</span> <span class="o">=</span> <span class="n">geemap</span><span class="o">.</span><span class="n">Map</span><span class="p">()</span>
<span class="n">Map</span><span class="o">.</span><span class="n">setCenter</span><span class="p">(</span><span class="n">roi_coords</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">roi_coords</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">5</span><span class="p">)</span>
<span class="n">Map</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">vis_params_l8</span><span class="p">)</span>
<span class="n">Map</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





 
 
<div id="ea74a64c-62aa-4df0-98e5-ae574813e8cd" class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#ea74a64c-62aa-4df0-98e5-ae574813e8cd');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "39757cbb6a4149db918ac93697763ec7", "version_major": 2, "version_minor": 0}
</script>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Due to the time lag, horizontal neighbours can have very different weather conditions.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[7]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Map</span> <span class="o">=</span> <span class="n">geemap</span><span class="o">.</span><span class="n">Map</span><span class="p">()</span>
<span class="n">Map</span><span class="o">.</span><span class="n">setCenter</span><span class="p">(</span><span class="n">roi_coords</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">roi_coords</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Map</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">vis_params_l8</span><span class="p">)</span>
<span class="n">Map</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





 
 
<div id="6712edf8-8cf2-455a-958e-45b289c8cd36" class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#6712edf8-8cf2-455a-958e-45b289c8cd36');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "3bb59025a030481489a0e1f132e45734", "version_major": 2, "version_minor": 0}
</script>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Image-metadata">Image metadata<a class="anchor-link" href="#Image-metadata">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To get a better feeling about the volume of images produced by Landsat we can pull a collection of images and extract metadata from it.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[8]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">dataset</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span><span class="s1">&#39;LANDSAT/LC08/C01/T1_SR&#39;</span><span class="p">)</span> \
                  <span class="o">.</span><span class="n">filterDate</span><span class="p">(</span><span class="s1">&#39;2016-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;2016-12-31&#39;</span><span class="p">)</span> \
                  <span class="o">.</span><span class="n">filterBounds</span><span class="p">(</span><span class="n">roi_region_medium</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Given those time and spatial filters the collection still has rather many images:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[9]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">collection_len</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[9]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>893</pre>
</div>

</div>

</div>
</div>

</div>Any single images comes with a lot of metadata attached:
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[10]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">this_img</span> <span class="o">=</span> <span class="n">extract_single_img</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">this_img_props_dict</span> <span class="o">=</span> <span class="n">geemap</span><span class="o">.</span><span class="n">image_props</span><span class="p">(</span><span class="n">this_img</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
<span class="n">img_props</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">this_img_props_dict</span><span class="p">,</span> <span class="n">orient</span><span class="o">=</span><span class="s1">&#39;index&#39;</span><span class="p">)</span>
<span class="n">img_props</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[10]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>CLOUD_COVER</th>
      <td>49.26</td>
    </tr>
    <tr>
      <th>CLOUD_COVER_LAND</th>
      <td>49.26</td>
    </tr>
    <tr>
      <th>EARTH_SUN_DISTANCE</th>
      <td>0.987519</td>
    </tr>
    <tr>
      <th>ESPA_VERSION</th>
      <td>2_23_0_1a</td>
    </tr>
    <tr>
      <th>GEOMETRIC_RMSE_MODEL</th>
      <td>9.104</td>
    </tr>
    <tr>
      <th>GEOMETRIC_RMSE_MODEL_X</th>
      <td>7.242</td>
    </tr>
    <tr>
      <th>GEOMETRIC_RMSE_MODEL_Y</th>
      <td>5.517</td>
    </tr>
    <tr>
      <th>IMAGE_DATE</th>
      <td>2016-02-14</td>
    </tr>
    <tr>
      <th>IMAGE_QUALITY_OLI</th>
      <td>9</td>
    </tr>
    <tr>
      <th>IMAGE_QUALITY_TIRS</th>
      <td>9</td>
    </tr>
    <tr>
      <th>LANDSAT_ID</th>
      <td>LC08_L1TP_034034_20160214_20170224_01_T1</td>
    </tr>
    <tr>
      <th>LEVEL1_PRODUCTION_DATE</th>
      <td>1487928420000</td>
    </tr>
    <tr>
      <th>NOMINAL_SCALE</th>
      <td>30</td>
    </tr>
    <tr>
      <th>PIXEL_QA_VERSION</th>
      <td>generate_pixel_qa_1.6.0</td>
    </tr>
    <tr>
      <th>SATELLITE</th>
      <td>LANDSAT_8</td>
    </tr>
    <tr>
      <th>SENSING_TIME</th>
      <td>2016-02-14T17:44:12.9346930Z</td>
    </tr>
    <tr>
      <th>SOLAR_AZIMUTH_ANGLE</th>
      <td>151.02919</td>
    </tr>
    <tr>
      <th>SOLAR_ZENITH_ANGLE</th>
      <td>55.366402</td>
    </tr>
    <tr>
      <th>SR_APP_VERSION</th>
      <td>LaSRC_1.3.0</td>
    </tr>
    <tr>
      <th>WRS_PATH</th>
      <td>34</td>
    </tr>
    <tr>
      <th>WRS_ROW</th>
      <td>34</td>
    </tr>
    <tr>
      <th>system:asset_size</th>
      <td>697.355882 MB</td>
    </tr>
    <tr>
      <th>system:band_names</th>
      <td>[B1, B2, B3, B4, B5, B6, B7, B10, B11, sr_aero...</td>
    </tr>
    <tr>
      <th>system:id</th>
      <td>LANDSAT/LC08/C01/T1_SR/LC08_034034_20160214</td>
    </tr>
    <tr>
      <th>system:index</th>
      <td>LC08_034034_20160214</td>
    </tr>
    <tr>
      <th>system:time_end</th>
      <td>2016-02-14 17:44:12</td>
    </tr>
    <tr>
      <th>system:time_start</th>
      <td>2016-02-14 17:44:12</td>
    </tr>
    <tr>
      <th>system:version</th>
      <td>1522753341537768</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[11]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">img_props</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s1">&#39;system:band_names&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">squeeze</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[11]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>[&#39;B1&#39;,
 &#39;B2&#39;,
 &#39;B3&#39;,
 &#39;B4&#39;,
 &#39;B5&#39;,
 &#39;B6&#39;,
 &#39;B7&#39;,
 &#39;B10&#39;,
 &#39;B11&#39;,
 &#39;sr_aerosol&#39;,
 &#39;pixel_qa&#39;,
 &#39;radsat_qa&#39;]</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can extract the most important properties for all images:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[12]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">list_of_props</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;CLOUD_COVER&#39;</span><span class="p">,</span> <span class="s1">&#39;CLOUD_COVER_LAND&#39;</span><span class="p">,</span> <span class="s1">&#39;WRS_PATH&#39;</span><span class="p">,</span> <span class="s1">&#39;WRS_ROW&#39;</span><span class="p">]</span>
<span class="n">all_img_dates</span> <span class="o">=</span> <span class="n">geemap</span><span class="o">.</span><span class="n">image_dates</span><span class="p">(</span><span class="n">dataset</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
<span class="n">metadata</span> <span class="o">=</span> <span class="n">extract_img_collection_metadata</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">list_of_props</span><span class="p">)</span>
<span class="n">metadata</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">all_img_dates</span>
<span class="n">metadata</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[12]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CLOUD_COVER</th>
      <th>CLOUD_COVER_LAND</th>
      <th>WRS_PATH</th>
      <th>WRS_ROW</th>
      <th>date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>49.26</td>
      <td>49.26</td>
      <td>34.0</td>
      <td>34.0</td>
      <td>2016-02-14</td>
    </tr>
    <tr>
      <th>1</th>
      <td>9.31</td>
      <td>9.31</td>
      <td>34.0</td>
      <td>34.0</td>
      <td>2016-03-01</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2.47</td>
      <td>2.47</td>
      <td>34.0</td>
      <td>34.0</td>
      <td>2016-03-17</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2.99</td>
      <td>2.99</td>
      <td>34.0</td>
      <td>34.0</td>
      <td>2016-04-02</td>
    </tr>
    <tr>
      <th>4</th>
      <td>6.76</td>
      <td>6.76</td>
      <td>34.0</td>
      <td>34.0</td>
      <td>2016-05-04</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>From this we immediately can see that we get multiple images for multiple tiles of the <a href="https://landsat.gsfc.nasa.gov/about/worldwide-reference-system">Worldwide reference system</a>:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[13]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">metadata</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s1">&#39;WRS_PATH&#39;</span><span class="p">,</span> <span class="s1">&#39;WRS_ROW&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">drop_duplicates</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[13]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>WRS_PATH</th>
      <th>WRS_ROW</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>34.0</td>
      <td>34.0</td>
    </tr>
    <tr>
      <th>20</th>
      <td>34.0</td>
      <td>35.0</td>
    </tr>
    <tr>
      <th>42</th>
      <td>34.0</td>
      <td>36.0</td>
    </tr>
    <tr>
      <th>65</th>
      <td>34.0</td>
      <td>37.0</td>
    </tr>
    <tr>
      <th>87</th>
      <td>35.0</td>
      <td>33.0</td>
    </tr>
    <tr>
      <th>110</th>
      <td>35.0</td>
      <td>34.0</td>
    </tr>
    <tr>
      <th>133</th>
      <td>35.0</td>
      <td>35.0</td>
    </tr>
    <tr>
      <th>156</th>
      <td>35.0</td>
      <td>36.0</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A given tile is revisited roughly every 2 weeks:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[14]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">single_tile_over_time</span> <span class="o">=</span> <span class="n">metadata</span><span class="o">.</span><span class="n">query</span><span class="p">(</span><span class="s1">&#39;WRS_PATH == 39 and WRS_ROW == 37&#39;</span><span class="p">)</span>
<span class="n">single_tile_over_time</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[14]:</div>



<div class="output_html rendered_html output_subarea output_execute_result">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>CLOUD_COVER</th>
      <th>CLOUD_COVER_LAND</th>
      <th>WRS_PATH</th>
      <th>WRS_ROW</th>
      <th>date</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>633</th>
      <td>74.01</td>
      <td>74.01</td>
      <td>39.0</td>
      <td>37.0</td>
      <td>2016-01-16</td>
    </tr>
    <tr>
      <th>634</th>
      <td>11.01</td>
      <td>11.01</td>
      <td>39.0</td>
      <td>37.0</td>
      <td>2016-02-01</td>
    </tr>
    <tr>
      <th>635</th>
      <td>2.33</td>
      <td>2.33</td>
      <td>39.0</td>
      <td>37.0</td>
      <td>2016-02-17</td>
    </tr>
    <tr>
      <th>636</th>
      <td>10.90</td>
      <td>10.90</td>
      <td>39.0</td>
      <td>37.0</td>
      <td>2016-03-04</td>
    </tr>
    <tr>
      <th>637</th>
      <td>2.41</td>
      <td>2.41</td>
      <td>39.0</td>
      <td>37.0</td>
      <td>2016-03-20</td>
    </tr>
    <tr>
      <th>638</th>
      <td>87.75</td>
      <td>87.75</td>
      <td>39.0</td>
      <td>37.0</td>
      <td>2016-04-05</td>
    </tr>
    <tr>
      <th>639</th>
      <td>5.50</td>
      <td>5.50</td>
      <td>39.0</td>
      <td>37.0</td>
      <td>2016-04-21</td>
    </tr>
    <tr>
      <th>640</th>
      <td>27.35</td>
      <td>27.35</td>
      <td>39.0</td>
      <td>37.0</td>
      <td>2016-05-07</td>
    </tr>
    <tr>
      <th>641</th>
      <td>0.17</td>
      <td>0.17</td>
      <td>39.0</td>
      <td>37.0</td>
      <td>2016-05-23</td>
    </tr>
    <tr>
      <th>642</th>
      <td>8.91</td>
      <td>8.91</td>
      <td>39.0</td>
      <td>37.0</td>
      <td>2016-06-08</td>
    </tr>
    <tr>
      <th>643</th>
      <td>0.00</td>
      <td>0.00</td>
      <td>39.0</td>
      <td>37.0</td>
      <td>2016-06-24</td>
    </tr>
    <tr>
      <th>644</th>
      <td>0.00</td>
      <td>0.00</td>
      <td>39.0</td>
      <td>37.0</td>
      <td>2016-07-10</td>
    </tr>
    <tr>
      <th>645</th>
      <td>1.28</td>
      <td>1.28</td>
      <td>39.0</td>
      <td>37.0</td>
      <td>2016-07-26</td>
    </tr>
    <tr>
      <th>646</th>
      <td>4.75</td>
      <td>4.75</td>
      <td>39.0</td>
      <td>37.0</td>
      <td>2016-08-11</td>
    </tr>
    <tr>
      <th>647</th>
      <td>2.08</td>
      <td>2.08</td>
      <td>39.0</td>
      <td>37.0</td>
      <td>2016-08-27</td>
    </tr>
    <tr>
      <th>648</th>
      <td>0.02</td>
      <td>0.02</td>
      <td>39.0</td>
      <td>37.0</td>
      <td>2016-09-12</td>
    </tr>
    <tr>
      <th>649</th>
      <td>3.34</td>
      <td>3.34</td>
      <td>39.0</td>
      <td>37.0</td>
      <td>2016-09-28</td>
    </tr>
    <tr>
      <th>650</th>
      <td>0.77</td>
      <td>0.77</td>
      <td>39.0</td>
      <td>37.0</td>
      <td>2016-10-14</td>
    </tr>
    <tr>
      <th>651</th>
      <td>79.11</td>
      <td>79.11</td>
      <td>39.0</td>
      <td>37.0</td>
      <td>2016-10-30</td>
    </tr>
    <tr>
      <th>652</th>
      <td>6.53</td>
      <td>6.53</td>
      <td>39.0</td>
      <td>37.0</td>
      <td>2016-11-15</td>
    </tr>
    <tr>
      <th>653</th>
      <td>40.18</td>
      <td>40.18</td>
      <td>39.0</td>
      <td>37.0</td>
      <td>2016-12-01</td>
    </tr>
    <tr>
      <th>654</th>
      <td>0.30</td>
      <td>0.30</td>
      <td>39.0</td>
      <td>37.0</td>
      <td>2016-12-17</td>
    </tr>
  </tbody>
</table>
</div>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[15]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">single_tile_over_time</span><span class="o">.</span><span class="n">shape</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[15]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>(22, 5)</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Depending on the time of the year, any given tile might look pretty different for different visits of the satellite:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[16]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">scene</span> <span class="o">=</span> <span class="n">extract_single_img</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="mi">643</span><span class="p">)</span>

<span class="n">Map</span> <span class="o">=</span> <span class="n">geemap</span><span class="o">.</span><span class="n">Map</span><span class="p">()</span>
<span class="n">Map</span><span class="o">.</span><span class="n">centerObject</span><span class="p">(</span><span class="n">scene</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Map</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">scene</span><span class="p">,</span> <span class="n">vis_params_l8</span><span class="p">,</span> <span class="s1">&#39;default RGB&#39;</span><span class="p">)</span>

<span class="n">Map</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





 
 
<div id="3b9d86d3-0efa-44cb-8447-9be0dfee3163" class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#3b9d86d3-0efa-44cb-8447-9be0dfee3163');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "41fc790faf994fcea58b8ca6b6b8784a", "version_major": 2, "version_minor": 0}
</script>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In particular with weather phenomena like clouds:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[17]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">scene</span> <span class="o">=</span> <span class="n">extract_single_img</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="mi">633</span><span class="p">)</span>

<span class="n">Map</span> <span class="o">=</span> <span class="n">geemap</span><span class="o">.</span><span class="n">Map</span><span class="p">()</span>
<span class="n">Map</span><span class="o">.</span><span class="n">centerObject</span><span class="p">(</span><span class="n">scene</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Map</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">scene</span><span class="p">,</span> <span class="n">vis_params_l8</span><span class="p">,</span> <span class="s1">&#39;default RGB&#39;</span><span class="p">)</span>

<span class="n">Map</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





 
 
<div id="8ab3273d-3fc8-410f-9ec6-a338690416fa" class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#8ab3273d-3fc8-410f-9ec6-a338690416fa');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "80fe1796931a4d558e21468b9e5c4ee2", "version_major": 2, "version_minor": 0}
</script>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Mosaic-visualization">Mosaic visualization<a class="anchor-link" href="#Mosaic-visualization">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Clouds are an obvious impediment for any visual inspection. So we can try to improve the visualization of a mosaic by only taking images with rather low ratio clouds.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Without any special consideration of clouds, this is what we get:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[18]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Map</span> <span class="o">=</span> <span class="n">geemap</span><span class="o">.</span><span class="n">Map</span><span class="p">()</span>
<span class="n">Map</span><span class="o">.</span><span class="n">setCenter</span><span class="p">(</span><span class="n">roi_coords</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">roi_coords</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">Map</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">vis_params_l8</span><span class="p">)</span>
<span class="n">Map</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





 
 
<div id="f1c76346-30a9-468b-b202-3dbfb4a47634" class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#f1c76346-30a9-468b-b202-3dbfb4a47634');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "ca168e504d784fc6a99eed9d3cbf741d", "version_major": 2, "version_minor": 0}
</script>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>An easy way to improve things is by taking median pixel values, not only the last observation per pixel:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[19]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Map</span> <span class="o">=</span> <span class="n">geemap</span><span class="o">.</span><span class="n">Map</span><span class="p">()</span>
<span class="n">Map</span><span class="o">.</span><span class="n">setCenter</span><span class="p">(</span><span class="n">roi_coords</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">roi_coords</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">Map</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">median</span><span class="p">(),</span> <span class="n">vis_params_l8</span><span class="p">)</span>
<span class="n">Map</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





 
 
<div id="43e560e6-43d9-4a12-8c11-404fee1eb472" class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#43e560e6-43d9-4a12-8c11-404fee1eb472');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "22d96ab593d445efb1e14e6dc5b46de3", "version_major": 2, "version_minor": 0}
</script>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If we sort with regards to cloud coverage, we can easily visualize both extremes for cloud coverage.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[20]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cloud_reduced_images</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">&#39;CLOUD_COVER&#39;</span><span class="p">,</span> <span class="n">opt_ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[21]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Map</span> <span class="o">=</span> <span class="n">geemap</span><span class="o">.</span><span class="n">Map</span><span class="p">()</span>
<span class="n">Map</span><span class="o">.</span><span class="n">setCenter</span><span class="p">(</span><span class="n">roi_coords</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">roi_coords</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">Map</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">cloud_reduced_images</span><span class="p">,</span> <span class="n">vis_params_l8</span><span class="p">)</span>
<span class="n">Map</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





 
 
<div id="f1e075e4-1c21-4851-b8d5-64197e018697" class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#f1e075e4-1c21-4851-b8d5-64197e018697');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "96efdb78f9b1486f9c9285a2858371a1", "version_major": 2, "version_minor": 0}
</script>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[22]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cloud_reduced_images</span> <span class="o">=</span> <span class="n">dataset</span><span class="o">.</span><span class="n">sort</span><span class="p">(</span><span class="s1">&#39;CLOUD_COVER&#39;</span><span class="p">,</span> <span class="n">opt_ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[23]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Map</span> <span class="o">=</span> <span class="n">geemap</span><span class="o">.</span><span class="n">Map</span><span class="p">()</span>
<span class="n">Map</span><span class="o">.</span><span class="n">setCenter</span><span class="p">(</span><span class="n">roi_coords</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">roi_coords</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">Map</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">cloud_reduced_images</span><span class="p">,</span> <span class="n">vis_params_l8</span><span class="p">)</span>
<span class="n">Map</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





 
 
<div id="872d860e-26e7-4ce7-9a3f-7ca53e63e659" class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#872d860e-26e7-4ce7-9a3f-7ca53e63e659');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "e692107598be4f7ea8cf2d00af3ab8d3", "version_major": 2, "version_minor": 0}
</script>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Although this is already a huge improvement of the visualization, it still comes with the problem that individual images might be taken from totally different points in time. This might lead to neighbouring images having totally different vegetation states (summer vs winter) or even having snow vs no snow.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Masking">Masking<a class="anchor-link" href="#Masking">&#182;</a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[24]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">scene</span> <span class="o">=</span> <span class="n">extract_single_img</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="mi">633</span><span class="p">)</span>

<span class="n">Map</span> <span class="o">=</span> <span class="n">geemap</span><span class="o">.</span><span class="n">Map</span><span class="p">()</span>
<span class="n">Map</span><span class="o">.</span><span class="n">centerObject</span><span class="p">(</span><span class="n">scene</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Map</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">scene</span><span class="p">,</span> <span class="n">vis_params_l8</span><span class="p">,</span> <span class="s1">&#39;default RGB&#39;</span><span class="p">)</span>

<span class="n">Map</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





 
 
<div id="d5ddb984-1bee-40af-8a46-e56b6effac8d" class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#d5ddb984-1bee-40af-8a46-e56b6effac8d');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "6a84299a9f354edfa19ef0b36b026f0a", "version_major": 2, "version_minor": 0}
</script>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[25]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">maskL8sr</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
    <span class="c1"># From: https://developers.google.com/earth-engine/datasets/catalog/LANDSAT_LC08_C01_T1_SR</span>
    
    <span class="c1"># Bits 3 and 5 are cloud shadow and cloud, respectively.</span>
    <span class="n">cloudShadowBitMask</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">cloudsBitMask</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="mi">5</span><span class="p">)</span>
    
    <span class="c1"># Get the pixel QA band.</span>
    <span class="n">qa</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">select</span><span class="p">(</span><span class="s1">&#39;pixel_qa&#39;</span><span class="p">)</span>
    
    <span class="c1"># Both flags should be set to zero, indicating clear conditions.</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">qa</span><span class="o">.</span><span class="n">bitwiseAnd</span><span class="p">(</span><span class="n">cloudShadowBitMask</span><span class="p">)</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> \
                 <span class="o">.</span><span class="n">And</span><span class="p">(</span><span class="n">qa</span><span class="o">.</span><span class="n">bitwiseAnd</span><span class="p">(</span><span class="n">cloudsBitMask</span><span class="p">)</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    
    <span class="k">return</span> <span class="n">image</span><span class="o">.</span><span class="n">updateMask</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[26]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">scene</span> <span class="o">=</span> <span class="n">maskL8sr</span><span class="p">(</span><span class="n">extract_single_img</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="mi">633</span><span class="p">))</span>

<span class="n">Map</span> <span class="o">=</span> <span class="n">geemap</span><span class="o">.</span><span class="n">Map</span><span class="p">()</span>
<span class="n">Map</span><span class="o">.</span><span class="n">centerObject</span><span class="p">(</span><span class="n">scene</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
<span class="n">Map</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">scene</span><span class="p">,</span> <span class="n">vis_params_l8</span><span class="p">,</span> <span class="s1">&#39;default RGB&#39;</span><span class="p">)</span>

<span class="n">Map</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





 
 
<div id="4ef91e2d-bc00-45f9-a80e-f5173dc265ca" class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#4ef91e2d-bc00-45f9-a80e-f5173dc265ca');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "1606870808404ad6b5fa73e3fb17f0f2", "version_major": 2, "version_minor": 0}
</script>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered"><div class="prompt input_prompt">
</div><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can also combine all approaches: filter clouds on a per pixel basis and take the median values of the remaining pixels:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In&nbsp;[27]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">Map</span> <span class="o">=</span> <span class="n">geemap</span><span class="o">.</span><span class="n">Map</span><span class="p">()</span>
<span class="n">Map</span><span class="o">.</span><span class="n">setCenter</span><span class="p">(</span><span class="n">roi_coords</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">roi_coords</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="mi">6</span><span class="p">)</span>
<span class="n">Map</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">dataset</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">maskL8sr</span><span class="p">)</span><span class="o">.</span><span class="n">median</span><span class="p">(),</span> <span class="n">vis_params_l8</span><span class="p">)</span>
<span class="n">Map</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>





 
 
<div id="4909fb88-8df0-456f-b80c-9957d255c253" class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#4909fb88-8df0-456f-b80c-9957d255c253');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "e3f0c541e3c242a3a89424d7b122a9fd", "version_major": 2, "version_minor": 0}
</script>
</div>

</div>

</div>
</div>

</div>
 

